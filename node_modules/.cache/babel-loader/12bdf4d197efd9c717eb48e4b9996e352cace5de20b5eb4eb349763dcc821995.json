{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./library.scss';import{ReactComponent as Search}from'../../assets/search.svg';import{ReactComponent as Link}from'../../assets/link.svg';import{ReactComponent as Options}from'../../assets/option.svg';import{useNavigate}from'react-router';import{auth}from'../utils/firebase/firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Library(){const[videos,setVideos]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const navigate=useNavigate();let user=auth.currentUser?auth.currentUser._delegate:null;// console.log(user);\nuseEffect(()=>{if(!user){return;// Wait for user to be available\n}const fetchVideos=async()=>{const folderPath=`uploads/${user.uid}`;try{const response=await fetch(`https://helpmeout-be.vercel.app/api/videos?folderPath=${encodeURIComponent(folderPath)}`);// Replace with your backend URL\nif(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}const data=await response.json();setVideos(data);// console.log(data)\n}catch(error){setError(error.message);console.error(\"Error fetching videos:\",error);}finally{setLoading(false);}};fetchVideos();},[user,user.uid]);if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading videos...\"});if(error)return/*#__PURE__*/_jsxs(\"p\",{children:[\"Error fetching videos: \",error]});const formatDate=isoDate=>{const date=new Date(isoDate);// Parse ISO date string\nconst options={year:'numeric',month:'long',day:'numeric'};// Desired format options\nconst formattedDate=date.toLocaleDateString('en-US',options).toUpperCase();// Format and convert to uppercase\nreturn formattedDate;};return/*#__PURE__*/_jsxs(\"div\",{className:\"library\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"welcome\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Hello, \",user.displayName]}),/*#__PURE__*/_jsx(\"p\",{children:\"Here are your recorded videos\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search\",children:[/*#__PURE__*/_jsx(Search,{}),/*#__PURE__*/_jsx(\"input\",{type:\"search\",placeholder:\"Search for a particular video\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bottom-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"videos\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Recent files\"}),/*#__PURE__*/_jsx(\"div\",{className:\"videos-container\",children:videos.map(video=>/*#__PURE__*/_jsxs(\"div\",{style:{border:\"1px solid #B6B3C699\",backgroundColor:\"#FBFBFB80\",borderRadius:\"12px\",padding:\"16px\",width:\"45%\"},children:[/*#__PURE__*/_jsx(\"video\",{controls:false,width:\"100%\",src:video.url,alt:video.public_id,style:{borderRadius:\"8px\"},onClick:()=>navigate(`/library/video?recording=${video.url}&name=${video.public_id}.webm`),children:\"Your browser does not support the video tag.\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"name\",children:[video.public_id.split(\"/\").pop(),\".\",video.format]}),/*#__PURE__*/_jsx(\"p\",{className:\"created\",children:formatDate(video.date_created)})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",paddingTop:\"16px\",gap:\"24px\"},children:[/*#__PURE__*/_jsx(Link,{}),/*#__PURE__*/_jsx(Options,{})]})]})]},video.public_id))})]})})]});}export default Library;","map":{"version":3,"names":["React","useState","useEffect","ReactComponent","Search","Link","Options","useNavigate","auth","jsx","_jsx","jsxs","_jsxs","Library","videos","setVideos","loading","setLoading","error","setError","navigate","user","currentUser","_delegate","fetchVideos","folderPath","uid","response","fetch","encodeURIComponent","ok","Error","status","data","json","message","console","children","formatDate","isoDate","date","Date","options","year","month","day","formattedDate","toLocaleDateString","toUpperCase","className","displayName","type","placeholder","map","video","style","border","backgroundColor","borderRadius","padding","width","controls","src","url","alt","public_id","onClick","split","pop","format","date_created","display","paddingTop","gap"],"sources":["C:/Users/Admin/HelpMeOut-Ui/src/component/library/library.jsx"],"sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport './library.scss';\r\nimport {ReactComponent as Search} from '../../assets/search.svg';\r\nimport {ReactComponent as Link} from '../../assets/link.svg';\r\nimport {ReactComponent as Options} from '../../assets/option.svg';\r\nimport { useNavigate } from 'react-router';\r\nimport { auth } from '../utils/firebase/firebase';\r\n\r\nfunction Library() {\r\n  const [videos, setVideos] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const navigate = useNavigate(); \r\n  let user = auth.currentUser ? auth.currentUser._delegate : null;\r\n  // console.log(user);\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      return; // Wait for user to be available\r\n    }\r\n    const fetchVideos = async () => {\r\n      const folderPath = `uploads/${user.uid}`;\r\n      try {\r\n        const response = await fetch(`https://helpmeout-be.vercel.app/api/videos?folderPath=${encodeURIComponent(folderPath)}`); // Replace with your backend URL\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n        const data = await response.json();\r\n        setVideos(data);\r\n        // console.log(data)\r\n      } catch (error) {\r\n        setError(error.message);\r\n        console.error(\"Error fetching videos:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchVideos();\r\n  }, [user, user.uid]);\r\n\r\n  if (loading) return <p>Loading videos...</p>;\r\n  if (error) return <p>Error fetching videos: {error}</p>;\r\n\r\n  const formatDate = (isoDate) => {\r\n    const date = new Date(isoDate); // Parse ISO date string\r\n    const options = { year: 'numeric', month: 'long', day: 'numeric' }; // Desired format options\r\n    const formattedDate = date.toLocaleDateString('en-US', options).toUpperCase(); // Format and convert to uppercase\r\n  \r\n    return formattedDate;\r\n  }\r\n\r\n  return (\r\n    <div className='library'>\r\n      <div className='top-container'>\r\n        <div className='welcome'>\r\n          <h1>Hello, {user.displayName}</h1>\r\n          <p>Here are your recorded videos</p>\r\n        </div>\r\n        <div className='search'>\r\n          <Search />\r\n          <input type='search' placeholder='Search for a particular video' />\r\n        </div>\r\n      </div>\r\n      <div className='bottom-container'>\r\n        <div className='videos'>\r\n          <p>Recent files</p>\r\n          <div className='videos-container'>\r\n          \r\n            {videos.map((video) => (\r\n              <div key={video.public_id} style={{ border: \"1px solid #B6B3C699\", backgroundColor: \"#FBFBFB80\", borderRadius: \"12px\", padding: \"16px\", width: \"45%\" }}>\r\n                <video\r\n                  controls={false}\r\n                  width=\"100%\"\r\n                  src={video.url}\r\n                  alt={video.public_id}\r\n                  style={{ borderRadius: \"8px\" }}\r\n                  onClick={() => navigate(`/library/video?recording=${video.url}&name=${video.public_id}.webm`)}\r\n                >\r\n                  Your browser does not support the video tag.\r\n                </video>\r\n                <div>\r\n                  <div>\r\n                    <p className='name'>{video.public_id.split(\"/\").pop()}.{video.format}</p>\r\n                    <p className='created'>{formatDate(video.date_created)}</p>\r\n                  </div>\r\n                  <div style={{display: \"flex\", paddingTop: \"16px\", gap: \"24px\"}} >\r\n                    <Link/>\r\n                    <Options/>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Library"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}